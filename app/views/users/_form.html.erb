<%= form_for(@user, url: {action: action}, html: {class: 'form-horizontal'}) do |f| %>
    <% if @user.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@user.errors.count, 'error') %> prohibited this goal from being saved:</h2>
          <ul>
            <% @user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>
    <div class="field form-group">
      <%= f.label :name, class: 'col-sm-2 control-label' %>
      <div class="col-sm-10">
        <%= f.text_field :name, autofocus: true, class: 'form-control' %>
      </div>
    </div>
    <div class="field form-group">
      <%= f.label :email, class: 'col-sm-2 control-label' %>
      <div class="col-sm-10">
        <%= f.text_field :email, class: 'form-control' %>
      </div>
    </div>
    <% if user_signed_in? && current_user.admin? %>
        <div class="field form-group">
          <%= f.label :role, class: 'col-sm-2 control-label' %>
          <div class="col-sm-10">
            <%= f.select(:role, User.roles.keys, {}) %>
          </div>
        </div>
    <% end %>
    <% if current_page?(new_user_path) %>
        <fieldset>
          <div class="field form-group">
            <%= f.label :password, class: 'col-sm-2 control-label' %>
            <div class="col-sm-10">
              <%= f.password_field :password, class: 'form-control' %>
            </div>
          </div>
          <div class="field form-group">
            <%= f.label :password_confirmation, class: 'col-sm-2 control-label' %>
            <div class="col-sm-10">
              <%= f.password_field :password_confirmation, class: 'form-control' %>
            </div>
          </div>
        </fieldset>
    <% end %>
    <div class="actions form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <%= f.submit class: 'button right' %>
      </div>
    </div>
<% end %>
